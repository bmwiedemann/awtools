
LoadModule setenvif_module                /usr/lib/apache2/modules/mod_setenvif.so
#LoadModule log_config_module              /usr/lib/apache2/modules/mod_log_config.so
LoadModule dir_module                     /usr/lib/apache2/modules/mod_dir.so
LoadModule negotiation_module                     /usr/lib/apache2/modules/mod_negotiation.so
LoadModule autoindex_module               /usr/lib/apache2/modules/mod_autoindex.so
LoadModule mime_module                    /usr/lib/apache2/modules/mod_mime.so
LoadModule authz_host_module                    /usr/lib/apache2/modules/mod_authz_host.so
LoadModule authz_user_module /usr/lib/apache2/modules/mod_authz_user.so
LoadModule alias_module                    /usr/lib/apache2/modules/mod_alias.so
LoadModule authn_file_module              /usr/lib/apache2/modules/mod_authn_file.so
LoadModule auth_basic_module                    /usr/lib/apache2/modules/mod_auth_basic.so
LoadModule env_module                    /usr/lib/apache2/modules/mod_env.so
#LoadModule perl_module                     /usr/lib/apache2/modules/mod_perl.so
LoadModule perl_module                     /usr/lib/apache2/modules/mod_perl.so

ErrorLog log/aw2-error_log
PidFile /tmp/apache-brownie.pid
User bernhard
Group www-data

TypesConfig /etc/mime.types

# for on-the-fly compression - this speeds up delivery
LoadModule deflate_module                    /usr/lib/apache2/modules/mod_deflate.so
LoadModule filter_module /usr/lib/apache2/modules/mod_filter.so
AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xhtml+xml text/css image/svg+xml application/javascript
DeflateBufferSize 65536



# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports. See also the <VirtualHost> directive.
#
# http://httpd.apache.org/docs-2.0/mod/mpm_common.html#listen
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses (0.0.0.0)
#
# When we also provide SSL we have to listen to the 
# standard HTTP port (see above) and to the HTTPS port
#
# Note: Configurations that use IPv6 but not IPv4-mapped addresses need two
#       Listen directives: "Listen [::]:443" and "Listen 0.0.0.0:443"
#
#Listen 12.34.56.78:80
#Listen 80

# this serves all HTTP pages
Listen 11080
# this port only serves proxy requests
Listen 11081


#Include /etc/apache2/server-tuning.conf
#Include /etc/apache2/errors.conf

<IfModule prefork.c>
        # number of server processes to start
        StartServers        2
        # minimum number of server processes which are kept spare
        MinSpareServers     2
        # maximum number of server processes which are kept spare
        MaxSpareServers     10
        # highest possible MaxClients setting for the lifetime of the Apache process.
        ServerLimit        40
        # maximum number of server processes allowed to start
        MaxClients         25

        MaxRequestsPerChild  200
</IfModule>
<IfModule mpm_worker_module>
    StartServers          2
    MaxClients           80
	 ServerLimit          40
    MinSpareThreads      40
    MaxSpareThreads      40
    ThreadsPerChild      40
    MaxRequestsPerChild   0
#    MaxRequestsPerChild   1000
#    ThreadStackSize     655360
</IfModule>

<IfDefine SSL>
    <IfDefine !NOSSL>
	<IfModule mod_ssl.c>

#	    Listen 443
	    Listen 444

	</IfModule>
    </IfDefine>
</IfDefine>


<IfModule mod_autoindex.c>

        IndexOptions FancyIndexing VersionSort NameWidth=*

</IfModule>
# ----
LoadModule geoip_module /usr/lib/apache2/modules/mod_geoip.so
<IfModule mod_geoip.c>
  GeoIPEnable On
  GeoIPDBFile /usr/share/GeoIP/GeoIP.dat Standard
#  GeoIPDBFile /usr/share/GeoIP/GeoLiteCity.dat Standard
</IfModule>
# ----
LoadModule status_module /usr/lib/apache2/modules/mod_status.so
<IfModule mod_status.c>
#
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
# Uncomment and change the ".example.com" to allow
# access from other hosts.
#
LoadModule access_compat_module /usr/lib/apache2/modules/mod_access_compat.so
ExtendedStatus On
<Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from localhost ip6-localhost
#    Allow from .example.com
</Location>
</IfModule>
# ----



KeepAliveTimeout 8

# Use name-based virtual hosting
# 
# - on a specified address / port:
#
#NameVirtualHost 12.34.56.78:80
#
# - name-based virtual hosting:
#
NameVirtualHost *:11080
#
# - on all addresses and ports. This is your best bet when you are on
#   dynamically assigned IP addresses:
#
#NameVirtualHost *

Include /etc/apache2/mods-available/authn_core.load
Include /etc/apache2/mods-available/authz_core.load
Include /etc/apache2/mods-available/mpm_prefork.load
Include /etc/apache2/mods-available/mpm_prefork.conf
Include vhost-brownie.conf

